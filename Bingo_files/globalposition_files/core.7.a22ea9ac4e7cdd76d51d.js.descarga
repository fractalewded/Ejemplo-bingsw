(window.agentWebpackJsonp=window.agentWebpackJsonp||[]).push([[7],{237:function(t,e,n){"use strict";var a=n(1);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(62),c=a(n(98)),i=n(298),s=(0,o.connect)(function(t){return t})((0,c.default)(i.Launcher,"Launcher"));e.default=s},243:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"setEventAnalytics",{enumerable:!0,get:function(){return a.setEventAnalytics}});var a=n(250)},250:function(t,e,n){"use strict";var a=n(1);Object.defineProperty(e,"__esModule",{value:!0}),e.setEventAnalytics=void 0;var o=a(n(24)),c=n(4);e.setEventAnalytics=function(t,e,n,a){o.default.post(c.MOr4lBe,{data:{user_hash:t,bot_token:e,user_agent:n,data:a}})}},298:function(t,e,n){"use strict";var a=n(1);Object.defineProperty(e,"__esModule",{value:!0}),e.Launcher=void 0;var o=a(n(63)),c=a(n(64)),i=a(n(29)),s=a(n(30)),r=a(n(99)),l=a(n(60)),u=a(n(61)),d=a(n(43)),p=a(n(7)),f=a(n(5)),h=n(17),m=n(4),g=n(23),v=n(6),_=n(10),w=n(65),y=n(101),b=a(n(44)),E=a(n(8)),A=n(243),C=n(31),T=n(299);function k(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,a=(0,d.default)(t);if(e){var o=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return(0,u.default)(this,n)}}var S="".concat(m.Ml5qzQR,"/cta_help.png"),W="".concat(m.Ml5qzQR,"/cta_chat.png"),I="".concat(m.Ml5qzQR,"/cta_icon.png"),M="".concat(m.Ml5qzQR,"/cta_help_b.png"),N="".concat(m.Ml5qzQR,"/cta_chat_b.png"),R="".concat(m.Ml5qzQR,"/cta_icon_b.png"),P=null,L=function(t){(0,l.default)(n,t);var e=k(n);function n(t){var a;return(0,i.default)(this,n),(a=e.call(this,t)).handleToggle=a.handleToggle.bind((0,r.default)(a)),a.handleTouchMove=a.handleTouchMove.bind((0,r.default)(a)),a.addAnimatedImageSupport=a.addAnimatedImageSupport.bind((0,r.default)(a)),a.getAnimatedImageClass=a.getAnimatedImageClass.bind((0,r.default)(a)),a.state={dimensions:{height:""}},a}return(0,s.default)(n,[{key:"isPNG",value:function(t){return"png"===(("string"==typeof t?t.split(".").pop():null)||t)}},{key:"hasAPNGSupport",value:function(){return!(g.DEVICE__EDGE||g.DEVICE__IE11||navigator.userAgent.match(/MSIE ([0-9]+)\./)&&parseInt(RegExp.$1)>=10||navigator.userAgent.match(/Chrome\/([0-9]+)\./)&&parseInt(RegExp.$1)<=58)}},{key:"addAnimatedImageSupport",value:function(){(0,E.default.searchInsideShadowRoot)(".aivochat-animated-image")[0].forEach(function(t){P.animateImage(t)})}},{key:"getAnimatedImageClass",value:function(t){var e=this.hasAPNGSupport()?"":"aivochat-animated-image";return e=this.isPNG(t||"")?e:""}},{key:"handleToggle",value:function(){var t=(0,c.default)(o.default.mark(function t(e){var n,a,c,i,s,r,l,u,d,p,f;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.preventDefault(),n=this.props,a=n.dispatch,c=n.agentConfig,i=c.app,s=i.botId,r=i.id,l=(0,_.checkTokenForGA)(r),c._windowOpened){t.next=18;break}return t.next=7,(0,y.importAgentAppChunk)();case 7:return u=t.sent,c.chatWindow.staticPosition||b.default.dragWindow(),t.next=11,a((0,h.setAppConfig)({AgentApp:u}));case 11:d=null,p=null,(0,_.isSmallWindow)()&&null!==c.ctaMobile?(d=c.ctaMobile.ctaType,p=!!c.ctaMobile.complements):(0,_.isSmallWindow)()||null===c.ctaWeb||(d=c.ctaWeb.ctaType,p=!!c.ctaWeb.complements),f=[{action:"event_id",param:c.app.id},{action:"event_type",param:"cta"},{action:"cta_type",param:d},{action:"activated_button",param:p},{action:"event",param:"open_cta"}],(0,A.setEventAnalytics)(c.user.id,c.app.id,window.navigator.userAgent,f),l&&(0,C.firstInteractionGoogleAnalytics)(s,"icon"),a((0,h.openWindow)());case 18:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"handleTouchMove",value:function(t){var e=E.default.searchInsideShadowRoot(".agent-launcher")[0],n=e.classList.value;if((0,_.isSmallWindow)()&&-1!==(-1!==n.indexOf("aivochat-launcher")||-1!==n.indexOf("agent-launcher")||n.indexOf("custom-html-css"))){t.preventDefault();var a=window.scrollY||window.pageYOffset,o=window.scrollX||window.pageXOffset,c=e.offsetWidth||e.clientWidth,i=e.offsetHeight||e.clientHeight,s=t.changedTouches[0].pageX-c/2,r=t.changedTouches[0].pageY-i/2,l=window.outerHeight-r-i+a,u=s-o;e.style.top="auto",e.style.right="auto",l>window.outerHeight-i&&(l=window.outerHeight-i),l<0&&(l=0),u>window.outerWidth-c&&(u=window.outerWidth-c),u<0&&(u=0),e.style.bottom="".concat(l,"px"),e.style.left="".concat(u,"px")}}},{key:"importAPNG",value:function(){var t=(0,c.default)(o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,y.importAPNGChunk)();case 2:P=t.sent,this.addAnimatedImageSupport();case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var t=E.default.searchInsideShadowRoot(".agent-launcher")[0],e=this.props,n=e.dispatch,a=e.agentConfig,o=a.chatWindow.launcher,c=o.type,i=o.mobile,s=E.default.searchInsideShadowRoot,r=a.app,l=r.botId,u=r.id,d=(0,_.checkTokenForGA)(u);if(t&&(t.addEventListener?t.addEventListener("touchmove",this.handleTouchMove):t.attachEvent("touchmove",this.handleTouchMove),this.hasAPNGSupport()||this.importAPNG()),4===c&&!(0,_.isSmallWindow)()||(0,_.isSmallWindow)()&&4===i.type){var p=(0,_.getHeightParentOrChild)(t);this.setState({dimensions:{height:p+30}})}s(".agent-launcher").length&&s(".agent-launcher")[0].addEventListener("click",function(){d&&(0,C.firstInteractionGoogleAnalytics)(l,"icon"),n((0,h.openWindow)())});var f=window.document.querySelector(".agent-launcher");f&&f.addEventListener("click",function(){d&&(0,C.firstInteractionGoogleAnalytics)(l,"icon"),n((0,h.openWindow)())})}},{key:"getLauncher",value:function(){var t=this.props.agentConfig.chatWindow.launcher,e=t;return(0,_.isSmallWindow)()&&t.mobile?e=t.mobile:!(0,_.isSmallWindow)()&&t.web&&(e=t.web),e.enabled=t.enabled,e}},{key:"render",value:function(){var t=this,e=this,n=this.props.agentConfig,a=n.chatWindow,o=a.launcher,c=a.staticPosition,i=a.colors,s=n._windowOpened,r=n.__launcherHidden,l=n.chatWindow.launcher.enabled,u=!s&&l&&!r,d=E.default.searchInsideShadowRoot,f=E.default.removeElement,h=E.default.createElement,m=function(e,n,a){var o=e.target.height+20;switch(a){case"right_bottom":case"center_bottom":case"left_bottom":case"right_top":case"center_top":case"left_top":3!==n&&4!==n&&(o+=40)}t.setState({dimensions:{height:o}})},g=function(t){var n=e.getAnimatedImageClass(o.image),a=e.getLauncher();switch(t||a.type){case 2:case 3:return p.default.createElement("img",{crossOrigin:"anonymous",className:n,src:a.image});case 4:return f("#custom_launcher_styles"),a.css&&d()[0].appendChild(h("style",{id:"custom_launcher_styles",innerHTML:"".concat(a.css)})),p.default.createElement("div",{dangerouslySetInnerHTML:{__html:a.html.replace(/(\\")/gm,'"')}});case 1:case 5:case 6:default:return y(t||a.type)}},y=function(e){var a="",o=(0,w.contrast)(i[0]),c=n.ctaWeb?n.ctaWeb:null,s=n.ctaWeb?n.ctaMobile:null;switch(e){case 1:a=o?S:M;break;case 5:a=o?W:N;break;case 6:a=o?I:R}return c.showNotification&&!(0,_.isSmallWindow)()||s.showNotification&&(0,_.isSmallWindow)()?p.default.createElement("div",{className:"aivochat-launcher__notification"},p.default.createElement("div",{className:"aivochat-launcher__notification-icon"},p.default.createElement("p",null,"1")),p.default.createElement("img",{src:a,className:t.getAnimatedImageClass(a),crossOrigin:"anonymous"})):p.default.createElement("img",{src:a,className:t.getAnimatedImageClass(a),crossOrigin:"anonymous"})};return p.default.createElement("div",null,function(){var t,a=e.getLauncher(),o=n.chatWindow.launcher.position;(0,_.isSmallWindow)()&&n.ctaMobile?t=n.ctaMobile:!(0,_.isSmallWindow)()&&n.ctaWeb&&(t=n.ctaWeb);var s=o,r=function(t){var e=(0,_.getPositionClass)(a.position?a.position:"right_bottom"),n=c?v.KEY__STATIC_POSITION:"",o="".concat(u?v.KEY__ELEMENT_SHOW:v.KEY__ELEMENT_HIDE),i="".concat(v.KEY__LAUNCHER," ").concat(e," ").concat(n," ").concat(o);switch(t||a.type){case 1:case 5:case 6:return"".concat(i," custom-background");case 2:return"".concat(i," ").concat(v.KEY__LAUNCHER_TYPE_WITH_IMAGE," custom-background");case 3:return"".concat(i," ").concat(v.KEY__LAUNCHER_TYPE_ONLY_IMAGE);case 4:return"".concat(e," ").concat(o," ").concat(v.KEY__LAUNCHER_TYPE_CUSTOM)}};if(!a.enabled)return null;(0,_.isSmallWindow)()&&(s=n.chatWindow.launcher.mobile.position);var l=e.state.dimensions,d=e.props.dispatch;switch(a.type){case 3:return p.default.createElement("div",null,p.default.createElement("div",{id:"".concat(v.KEY__LAUNCHER),className:"".concat(r()),onClick:e.handleToggle,onLoad:function(t){return m(t,a.type,s)}},g()),p.default.createElement(T.CTAButtons,{dispatch:d,dimensions:l,colors:i,classPosition:s,ctaButtonsData:t,agentConfig:n}));case 4:return p.default.createElement("div",null,p.default.createElement("div",{id:"".concat(v.KEY__LAUNCHER),className:"".concat(r()),onLoad:function(t){return m(t,a.type,s)}},g()),p.default.createElement(T.CTAButtons,{dispatch:d,dimensions:l,colors:i,classPosition:s,ctaButtonsData:t,agentConfig:n}));case 1:case 2:case 5:case 6:default:return p.default.createElement("div",null,p.default.createElement("div",{id:v.KEY__LAUNCHER,className:r(),onClick:e.handleToggle,onLoad:function(t){return m(t,a.type,s)}},g()),p.default.createElement(T.CTAButtons,{dispatch:d,dimensions:l,colors:i,classPosition:s,ctaButtonsData:t,agentConfig:n}))}}())}}]),n}(p.default.Component);e.Launcher=L,L.propTypes={agentConfig:f.default.object,dispatch:f.default.func}},299:function(t,e,n){"use strict";var a=n(1);Object.defineProperty(e,"__esModule",{value:!0}),e.CTAButtons=void 0;var o=a(n(29)),c=a(n(30)),i=a(n(99)),s=a(n(60)),r=a(n(61)),l=a(n(43)),u=a(n(3)),d=a(n(7)),p=n(17),f=a(n(5)),h=a(n(8)),m=n(10),g=n(243),v=n(31);function _(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,a=(0,l.default)(t);if(e){var o=(0,l.default)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return(0,r.default)(this,n)}}var w=function(t){(0,s.default)(n,t);var e=_(n);function n(t){var a;return(0,o.default)(this,n),a=e.call(this,t),(0,u.default)((0,i.default)(a),"handleCloseCTAButtons",function(t,e,n,o){t.preventDefault();var c=a.props.agentConfig.app,i=c.botId,s=c.id,r=(0,m.checkTokenForGA)(s),l=null!==o,u=[{action:"event_id",param:n.id},{action:"event_type",param:"cta"},{action:"cta_type",param:n.ctaType},{action:"activated_button",param:l},{action:"event",param:"close_ctaButton"}];(0,g.setEventAnalytics)(e.user.id,e.app.id,window.navigator.userAgent,u),r&&(0,v.firstInteractionGoogleAnalytics)(i,"close"),a.props.dispatch((0,p.setConfig)({_showCTAButtons:!1})),a.setState({closedComponent:!0})}),(0,u.default)((0,i.default)(a),"calculateMargin",function(t){switch(t){case"right_bottom":case"center_bottom":case"left_bottom":return"bottom";default:return"top"}}),(0,u.default)((0,i.default)(a),"handleSendButtonCTA",function(t,e,n,o,c,i,s){t.preventDefault();var r=n.app,l=h.default.getUsers()[0],u=null!==s,d=a.props.agentConfig.app,f=d.botId,_=d.id,w=(0,m.checkTokenForGA)(_),y=[{action:"event_id",param:i.id},{action:"event_type",param:"cta"},{action:"cta_type",param:i.ctaType},{action:"activated_button",param:u},{action:"event",param:"click_send_button"},{action:"event_value",param:c},{action:"group",param:o}];(0,g.setEventAnalytics)(n.user.id,n.app.id,window.navigator.userAgent,y),w&&(0,v.firstInteractionGoogleAnalytics)(f,"buttons"),a.props.dispatch((0,p.setConfig)({_showCTAButtons:!1})),a.setState({closedComponent:!0}),e((0,p.openWindow)()),e((0,p.sendMessage)(c,l,r.id))}),(0,u.default)((0,i.default)(a),"handleSendMessageCTA",function(t,e,n,o,c){t.preventDefault();var i=null!==c,s=a.props.agentConfig.app,r=s.botId,l=s.id,u=(0,m.checkTokenForGA)(l),d=[{action:"event_id",param:o.id},{action:"event_type",param:"cta"},{action:"cta_type",param:o.ctaType},{action:"activated_button",param:i},{action:"event",param:"click_send_message"},{action:"group",param:o.message}];(0,g.setEventAnalytics)(n.user.id,n.app.id,window.navigator.userAgent,d),u&&(0,v.firstInteractionGoogleAnalytics)(r,"message"),a.setState({closedComponent:!0}),a.props.dispatch((0,p.setConfig)({_showCTAButtons:!1})),e((0,p.openWindow)())}),a.state={closedComponent:!1},a}return(0,c.default)(n,[{key:"render",value:function(){var t=this,e=this.props,n=e.dispatch,a=e.dimensions,o=e.colors,c=e.classPosition,i=e.ctaButtonsData,s=e.agentConfig,r=i.complements,l=s,u=this.state.closedComponent,p=l._showCTAButtons,f=this.calculateMargin(c),h="top"===f?a.height:0,g="bottom"===f?a.height:0;return u&&!p||null===i.message&&null===r?null:d.default.createElement("div",{className:"cta-buttons__notification-container \n            cta-buttons__notification__".concat(c),style:{marginTop:"".concat(h,"px"),marginBottom:"".concat(g,"px")}},null!==i.message&&(0,m.isSmallWindow)()||!(0,m.isSmallWindow)()?d.default.createElement("div",{className:"cta-buttons__notification-container-close"},d.default.createElement("i",{style:{background:o[0]},className:"material-icons",onClick:function(e){return t.handleCloseCTAButtons(e,l,i,r)}},"close")):null,null!==i.message?d.default.createElement("div",{onClick:function(e){return t.handleSendMessageCTA(e,n,l,i,r)},className:"cta-buttons__notification-container-message"},d.default.createElement("h4",null,i.message)):null,null===r||(0,m.isSmallWindow)()?null:d.default.createElement("div",{className:"cta-buttons__notification-container-buttons"},r.map(function(e){return d.default.createElement("div",{className:"cta-buttons__notification-container-buttons-element",key:e.name},d.default.createElement("button",{style:{background:o[0]},onClick:function(a){return t.handleSendButtonCTA(a,n,l,e.name,e.intention,i,r)}},e.name))})))}}]),n}(d.default.Component);e.CTAButtons=w,w.propTypes={dispatch:f.default.func,colors:f.default.array,classPosition:f.default.string,ctaButtonsData:f.default.object,dimensions:f.default.object,agentConfig:f.default.object}}}]);